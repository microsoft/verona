(class
  ()
  []
  ()
  [
    (class
      $module-0
      []
      ()
      [
        (class Cown [ (typeparam T () ()) ] () [])
        (class A [] () [])
        (class B [] () [])
        (function bar [] [] () (lambda [] [] []))
        (function
          foo
          []
          [
            (param
              a
              (typeref [ (typename Cown [ (typeref [ (typename A []) ]) ]) ])
              ())
            (param
              b
              (typeref [ (typename Cown [ (typeref [ (typename B []) ]) ]) ])
              ())
          ]
          ()
          (lambda
            []
            []
            [
              (select
                (when (ref a) (lambda [] [] []))
                [ (typename apply []) ]
                (when
                  (tuple [ (ref a) (ref b) ])
                  (lambda
                    []
                    []
                    [
                      (select
                        (when
                          (select () [ (typename bar []) ] (tuple []))
                          (lambda [] [] []))
                        [ (typename return []) ]
                        (ref b))
                    ])))
            ]))
      ])
  ])
